(()=>{document.addEventListener("DOMContentLoaded",function(){var o=new JustGage({id:"energy-current-gauge",value:0,min:0,max:400,title:"Aktueller Stromverbrauch",label:"Watts/Hour",valueFontColor:"White"});function a(){fetch("fetch_sensors.php").then(e=>e.json()).then(e=>{console.log("Received data:",e);var r=parseFloat(e.energy_current);isNaN(r)?console.error("Invalid energy current value:",e.energy_current):o.refresh(r),document.getElementById("energy-total").innerHTML=function(){var d=document.getElementById("energy-total");if(d){var n=parseFloat(e.energy_total.replace(",","."));if(isNaN(n))return console.error("Energy total value is not a valid number."),"Total Consumption Today: Invalid data";n*=1e3;var v=(n/1e3).toFixed(2).replace(".",","),m=(n*.3/1e3).toFixed(2).replace(".",",");return"Total Consumption Today: "+v+' KW<br> = <span class="euro-cent-value" style="color: #00ff00; font-size:24px;">('+m+" \u20AC)</span>"}else return console.error("Element with id 'energy-total' not found."),""}();var t=document.getElementById("energy-current");if(t){var c=(r*.3/1e3).toFixed(2);t.innerHTML="Current Consumption Office: "+r+' Watts/Hour = <span class="euro-cent-value" style="color: #00ff00; font-size:24px;">('+c+" \u20AC/h)</span>"}else console.error("Element with id 'energy-current' not found.");document.getElementById("temperature-value").innerHTML="Temperature Outside: "+e.temperature_15+" \xB0C",document.getElementById("light-intensity-value").innerHTML="Light intensity outside: "+e.light_2+" lx <br>"}).catch(e=>console.error("Error fetching sensor data:",e))}setInterval(a,1e3),a()});function l(o){new IntersectionObserver((e,r)=>{e.forEach(t=>{t.isIntersecting?t.target.classList.add("visible"):t.target.classList.remove("visible")})},{threshold:.1}).observe(o)}var s=document.querySelector(".sevenDayChart");s&&l(s);var i=document.querySelector(".dailyCurrentChart");i&&l(i);var u=document.querySelector(".dailyChart");u&&l(u);})();
